/*========================================================================== COLOR (mostly) =====================================================================*/

/*----------------------------------------------------------------------- SET LIGHT MODE COLORS------------------------------------------------------------------*/

:root {
    --primary-500 : #ffba00 !important; /* selective yellow */    
    /*--primary-500 : #90d6b7 !important; /* mint green */
    /*--primary-500 : #00cccc !important; /* robin egg blue */

    --neutral-50: #f0f0f0;
    --neutral-100: #ebebeb;
    --neutral-200: #e4e4e4;

    --body-background-fill: var(--neutral-50);
    --background-fill-primary: var(--neutral-50);
    --background-fill-secondary: var(--neutral-100);
    --input-background-fill:  var(--neutral-50);

    --padding-main-top: 0;
    --padding-main-side: 150px;

    --qs-flex-base: 5%;
    
	--qs-background-color: var(--background-fill-secondary);
    --qs-border-color: var(--background-fill-secondary);

    --accordion-background-color: var(--input-background-fill);

	--checkbox-background-color: var(--input-background-fill) !important;
	--checkbox-background-color-selected: var(--input-background-fill) !important;
	--checkbox-border-color: var(--neutral-300) !important;
	--checkbox-border-color-selected: var(--checkbox-border-color) !important;
	--checkbox-border-color-focus: var(--checkbox-border-color) !important;

    --checkbox-label-background-fill: var(--input-background-fill);
    --checkbox-label-background-fill-hover: var(--background-fill-secondary);
    --checkbox-label-background-fill-selected: var(--background-fill-secondary);

    --block-title-text-color: var(--neutral-500) !important;
    --body-text-color: var(--neutral-500) !important;
    --body-text-color-subdued: var(--neutral-400) !important;

    --button-primary-background-color: var(--input-background-fill) !important;
    --button-primary-background-color-hover: var(--primary-500) !important;
    --button-primary-text-color: var(--neutral-600) !important;
    --button-primary-text-color-hover: var(--neutral-800) !important;    
    --button-primary-border-color: var(--neutral-300) !important;
    --button-primary-border-color-hover: var(--primary-500) !important;

    --button-secondary-background-color: var(--input-background-fill) !important;
    --button-secondary-background-color-hover: var(--neutral-100) !important;
    --button-secondary-text-color: var(--neutral-500) !important;

    --scrollbar-thumb-color: var(--neutral-100) !important;
    --scrollbar-thumb-color-hover: var(--neutral-200) !important;

    --slider-thumb-color: var(--input-background-fill) !important;
    --slider-full-color: var(--neutral-200) !important;
    --slider-empty-color: var(--input-background-fill) !important;

    --input-border-color: var(--neutral-200) !important;
    --input-border-color-focus: var(--neutral-300) !important;
    --input-shadow: 0 0 0 var(--shadow-spread) transparent, var(--shadow-inset);
    --input-shadow-focus: 0 0 0 var(--shadow-spread) transparent, var(--shadow-inset);

    --checkbox-check: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='black' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e") !important;
    --radio-circle: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='black' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e");
    --icon-unlocked: url("data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='11' width='18' height='11'/%3E%3Cpath d='M7 11V7a5 5 0 0 1 9.9-1'/%3E%3C/svg%3E%0A");
    --icon-locked: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='11' width='18' height='11' fill='black'/%3E%3Cpath d='M7 11V7a5 5 0 0 1 10 0v4'/%3E%3C/svg%3E%0A");

    --color-accent: var(--primary-500) !important;
}


/*------------------------------------------------------------------------ SET DARK MODE COLORS------------------------------------------------------------------*/

.dark {
	--primary-500 : #ffba00 !important;

    --neutral-200: #d6d9db;
    --neutral-300: #aeb2b7;
    --neutral-400: #a1a3a7;
    --neutral-500: #737579;
    --neutral-600: #60656c;
    --neutral-700: #474b50;
    --neutral-800: #33373b;
    --neutral-900: #25272c;
    --neutral-950: #1a1b1e;

    --border-color: var(--neutral-700);

    --qs-background-color: var(--background-fill-secondary);
    --qs-border-color: var(--border-color);

    --accordion-background-color: #2c2f34;

	--checkbox-background-color: var(--input-background-fill) !important;
	--checkbox-background-color-selected: var(--input-background-fill) !important;
	--checkbox-border-color-selected: var(--input-background-fill) !important;
	--checkbox-border-color-focus: var(--neutral-600) !important;

    --checkbox-label-background-fill: var(--input-background-fill) !important;
    --checkbox-label-background-fill-hover: var(--neutral-900) !important;
    --checkbox-label-background-fill-selected: var(--neutral-900) !important;

    --block-title-text-color: var(--neutral-300) !important;
    --body-text-color: var(--neutral-300) !important;
    --body-text-color-subdued: var(--neutral-500) !important;

    --button-primary-background-color: var(--neutral-700) !important;
    --button-primary-background-color-hover: var(--primary-500) !important;
    --button-primary-text-color: var(--neutral-200) !important; 
    --button-primary-text-color-hover: var(--neutral-800) !important; 
    --button-primary-border-color: var(--neutral-600) !important;
    --button-primary-border-color-hover: var(--primary-500) !important;

    --button-secondary-background-color: var(--neutral-700) !important;
    --button-secondary-background-color-hover: var(--neutral-600) !important;
    --button-secondary-text-color: var(--neutral-300) !important;

    --scrollbar-thumb-color: var(--neutral-700) !important;
    --scrollbar-thumb-color-hover: var(--neutral-600) !important;

    --slider-thumb-color: var(--neutral-400) !important;
    --slider-full-color: var(--neutral-500) !important;
    --slider-empty-color: var(--neutral-800) !important;

    --checkbox-check: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e") !important;

    --icon-unlocked: url("data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='11' width='18' height='11'/%3E%3Cpath d='M7 11V7a5 5 0 0 1 9.9-1'/%3E%3C/svg%3E%0A");
    --icon-locked: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='11' width='18' height='11' fill='white'/%3E%3Cpath d='M7 11V7a5 5 0 0 1 10 0v4'/%3E%3C/svg%3E%0A");
    
    --color-accent: var(--primary-500) !important;
}

/*---------------------------------------------------------- SET MAIN SCROLLBAR COLOR. this, sadly, has to be defined manually here ----------------------------------------------------------*/

body::-webkit-scrollbar-track {
    background: var(--neutral-900);        
}
body::-webkit-scrollbar-thumb {
    background: var(--neutral-700);  
    border-color: var(--neutral-700);
}
body::-webkit-scrollbar-thumb:hover {     
    background: var(--neutral-500);    
}

/*------------------------------------------------------------------------------------- REMOVE ALL OF THEM SHADOWS ---------------------------------------------------------------------------*/

* {
    box-shadow: none !important;
}

/*------------------------------------------------------------------------------------- MAKE LIGHT MODE BORDERLESS ---------------------------------------------------------------------------*/

:root {
    --border-color-primary: transparent !important;
    --button-cancel-border-color: transparent !important;
    --button-primary-border-color: transparent !important;
    --button-secondary-border-color: transparent !important;
    --table-border-color: transparent !important;
    --checkbox-border-color: transparent !important;
    --checkbox-border-color-hover: transparent !important;
    --border-color-accent: transparent !important;
    --input-shadow-focus: none !important;    
}
.tabs > .tab-nav {
    border-color: var(--neutral-300) !important; 
}
.tabs > .tab-nav > .selected {
    border-color: var(--neutral-300) !important; 
}
.tabs > .tabitem {
    border-color: var(--neutral-300) !important;       
}
#quicksettings {
    border-bottom-color: var(--neutral-300) !important;
}


/*------------------------------------------------------------------------------------- MAKE DARK MODE BORDERLESS ----------------------------------------------------------------------------*/

.dark {
    --border-color-primary: transparent !important;
    --button-cancel-border-color: transparent !important;
    --button-primary-border-color: transparent !important;
    --button-secondary-border-color: transparent !important;
    --table-border-color: transparent !important;
    --checkbox-border-color: transparent !important;
    --checkbox-border-color-hover: transparent !important;
    --border-color-accent: transparent !important;
    --input-shadow-focus: none !important;    
}
.dark .tabs > .tab-nav {
    border-color: var(--border-color) !important; 
}
.dark .tabs > .tab-nav > .selected {
    border-color: var(--border-color) !important; 
}
.dark .tabs > .tabitem {
    border-color: var(--border-color) !important;       
}
.dark #quicksettings {
    border-bottom-color: var(--border-color) !important;
}
.gradio-accordion .gradio-accordion {
    border-color: var(--border-color);
}


/*--------------------------------------------------------------------------- ASSIGN COLORS TO ELEMENTS --------------------------------------------------------------------------------------*/

#quicksettings {
	background: var(--qs-background-color) !important;
}
#quicksettings > #z-lock{
    background-color: var(--qs-background-color) !important;
}
.tabs > .tab-nav > .selected {
    background: var(--background-fill-secondary); 
}
.tabs > .tabitem {
    background: var(--background-fill-secondary);       
}
.tabs > .tab-nav > button:not(.selected):hover {
    background: var(--block-border-color);
}

#txt2img_script_container .gradio-accordion,
#img2img_script_container .gradio-accordion {
    background: var(--accordion-background-color) !important;
}
#txt2img_accordions .gradio-accordion,
#img2img_accordions .gradio-accordion {
    background: var(--accordion-background-color) !important;
}
.progressDiv {
    background: transparent !important;
}
.progressDiv .progress{
  	background: var(--color-accent);
  	color: var(--color-accent);
}
.livePreview{
  background: var(--background-fill-secondary) !important;
}
#txt2img_gallery, 
#img2img_gallery{
    background: transparent;
}
#txt2img_gallery .preview,
#img2img_gallery .preview{
    background: var(--background-fill-secondary) !important;
}
#txt2img_results, #img2img_results {
    background: transparent !important;
}

.performance .vram {
    color: var(--body-text-color-subdued);
}
.eta-bar {
    background: var(--input-background-fill) !important;
}
.gradio-dropdown ul.options li.item.selected {
    background-color: unset !important;
}

.dark .gradio-dropdown ul.options li.item.selected {
    background-color: unset !important;
}
.gradio-dropdown ul.options{
    background: var(--input-background-fill);
    border-color: var(--input-border-color-focus);
}
.gradio-dropdown ul.options li.item:not(:has(.hide)) {
	background: var(--color-accent) !important;
    color: black!important;
}
.dark .gradio-dropdown ul.options{
    background: var(--input-background-fill);
    border-color: var(--input-border-color-focus);
}
.dark .gradio-dropdown ul.options li.item:not(:has(.hide)) {
    background: var(--color-accent) !important;
    color: black!important;
}

.gradio-dropdown ul.options::-webkit-scrollbar-track {
    background: transparent;        
}
.gradio-dropdown ul.options::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb-color);  
    border-color: var(--input-background-fill);
}
.gradio-dropdown ul.options::-webkit-scrollbar-thumb:hover {     
    background: var(--scrollbar-thumb-color-hover);    
}

button.primary {
    background: var(--button-primary-background-color) !important;
}
button.primary:hover {
    background: var(--button-primary-background-color-hover) !important;
}
button.secondary {
    background: var(--button-secondary-background-color) !important;
}
button.secondary:hover {
    background: var(--button-secondary-background-color-hover) !important;
}
input[type="checkbox"] {
    background-color: var(--input-background-fill);
}
input[type="checkbox"]:checked {
    background-color: var(--checkbox-background-color-selected);
}

input[type="range"] {
    background: var(--slider-empty-color);
    border: 1px solid var(--block-border-color);
}   
input[type=range]:focus {
    border: 1px solid var(--input-border-color-focus);
}
input[type="range"]::-webkit-slider-thumb {
    background: var(--slider-thumb-color);
    border: 1px solid var(--input-border-color);
}
input[type="range"]::-webkit-slider-thumb:active {
    border: 1px solid var(--input-border-color-focus);
}

.dark input[type="range"] {
    background: var(--slider-empty-color);
}   
.dark input[type="range"]::-webkit-slider-thumb {
    background: var(--slider-thumb-color);    
}


/*======================================================================================== STYLING ===========================================================================================*/

/*------------------------------------------------------------------------------------ INPUTS 'N STUFF ---------------------------------------------------------------------------------------*/

input[type="range"] {
    -webkit-appearance: none;
    height: 10px;
    outline: none;
    cursor: pointer;
    border-radius: var(--radius-sm);    
    box-shadow: var(--input-shadow);
}   
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 24px;
    height: 14px;
    border-radius: var(--radius-sm);
    border-width: var(--input-border-width);
    border-style: solid;
    overflow: visible; 
    box-shadow: var(--shadow-drop);       
}
input[type="range"]::-webkit-slider-thumb:hover {
    box-shadow:var(--shadow-drop-lg);
}

.dark input[type="range"] {
    -webkit-appearance: none;
    height: 10px;
    outline: none;
    overflow: hidden;
    box-shadow: none;
}   
.dark input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 15px;
    height: 15px;
    overflow: visible; 
    border: none; 
    box-shadow: -800px 0 0 800px var(--slider-full-color);   
}
.dark input[type="range"]::-webkit-slider-thumb:hover {
    box-shadow: -800px 0 0 800px var(--slider-full-color);
}

input[type="checkbox"] {
    cursor: pointer;
}
input[type="checkbox"]:checked {
    background-image: var(--checkbox-check) !important;
}

.gradio-dropdown ul.options::-webkit-scrollbar {
    width: 12px;               
}
.gradio-dropdown ul.options::-webkit-scrollbar-thumb {
    border-radius: 20px;  
    border-width: 3px;
    border-style: solid;
}

body {
    overflow-y: scroll; 
}
body::-webkit-scrollbar {
    width: 12px;               
}
body::-webkit-scrollbar-thumb {
	border-radius: var(--radius-md); 
	border-width: 3px;
	border-style: solid;
}

.gradio-dropdown .wrap-inner{
    padding: var(--checkbox-label-gap) !important;
}

.gradio-dropdown ul.options{
    z-index: 1000;
    min-width: fit-content;
    max-width: inherit;
    white-space: nowrap;
    border-radius: var(--input-radius);
    margin-top: 4px;
    margin-bottom: 4px;
}
.gradio-dropdown ul.options {
    max-height: 35em;
    z-index: 1000;
    border-width: var(--input-border-width);
    border-style: solid;
}
.gradio-dropdown ul.options li.item {
    padding: 0.05em 0;
}

/*------------------------------------------------------------------------------- THE SUPER QUICKSETTINGS BAR -------------------------------------------------------------*/

#quicksettings {
    position: fixed;
    width: 100%;
    height: auto;
    top: 0;    
    left: 0;
    align-items: end;
    padding: 12px var(--padding-main-side) 16px !important;
    gap: 0;
    row-gap: 10px;
    z-index: 1000; 
    border-radius: 0;   
    box-shadow: var(--shadow-drop-lg);
}
.dark #quicksettings {
    border-bottom: 1px solid var(--border-color-primary);
    box-shadow: none;
}
#quicksettings.locked {
    position: fixed;
}
#quicksettings:not(.locked){
    transform: translateY(0);
    transition: transform 0.2s ease-in;
}
#quicksettings:not(.locked):not(:focus):not(:focus-within) {
    cursor: pointer;
    transform: translateY(calc(-100% + 24px));
    transition: transform 0.25s ease-out;
    z-index: 1000;
}
#quicksettings:not(.locked):not(:focus):not(:focus-within) > * {
    transition: visibility .2s ease-out;
}
#quicksettings:not(.locked):not(:focus):not(:focus-within) > * {
    visibility:hidden;
}
#quicksettings:not(.locked)::before {
  content: "";
  position: absolute;
  bottom: 9px;
  left: 0;
  right: 0;
  margin: auto;
  width: 10px; 
  height: 10px; 
  background-color: transparent;
  border-style: solid;
  border-width: 0 2px 2px 0;
  border-color: var(--body-text-color);
  transform: rotate(45deg);
  transition: opacity 0.5s ease-out;
}
#quicksettings:not(.locked):focus::before {
  opacity: 0;
  transition: opacity 0.2s ease-in;
}
#quicksettings:not(.locked):focus-within::before {
  opacity: 0;
  transition: opacity 0.2s ease-in;
}
#quicksettings.locked + div {
    top: 100px; 
}
#quicksettings:not(.locked) + div {
    top: 40px;
}

/*------------------------------------------------------------------------------------ THE INNARDS OF QUICKSETTINGS --------------------------------------------------------------------------*/

#quicksettings > div.gradio-dropdown{
    min-width: unset !important;
}
#quicksettings button {
    height: 36.6px !important;
}
#quicksettings label{
    max-height: 1.5em;
    overflow: hidden;
    align-items: start;
}
#quicksettings label:hover {
    overflow: visible;
}
#quicksettings label:hover > span {
    background: var(--neutral-800);
    border-radius: var(--radius-sm);
}

#quicksettings > div{
    margin: 0 4px 0 0;
    flex-basis: var(--qs-flex-base) !important;
    flex-grow: 1 !important;
    min-width: 0 !important;
    max-width: unset;
}
#quicksettings > div:not(:first-child) {
    margin-left: 4px !important;
}
#quicksettings > :nth-last-child(2) {
    margin-right: 20px !important;
}
#quicksettings input[type="number"] {
	width: 5em;
}
#quicksettings > #z-lock{
    cursor: pointer;
    position: absolute;
    bottom: 16px;
    right: var(--padding-main-side);
    margin: 2px 0 !important;
    max-width: 16px !important;
    min-width: 16px !important;
    border: none !important;
    opacity: .6;
    background-color: transparent;
    background-size: contain;
    background-image: var(--icon-unlocked) !important;
}
#quicksettings > #z-lock:checked{
    background-image: var(--icon-locked) !important;
}

/*------------------------------------------------------------- THE DECORATED LIST IN QUICK SETTINGS ------------------------------------------------------------*/

#quicksettings .gradio-dropdown ul.options li.item{
    padding-right: 12px;
}
#quicksettings .gradio-dropdown ul.options li.item::before {
  content: attr(data-value);
  display: inline-block;
  position: relative;
  font-family: monospace;
  font-size: 1.3em;
  top: -.15em;
  width: 1ch;
  height: 1em;
  margin-left: 8px;
  font-weight: bold;
  text-transform: capitalize;!important;
  overflow: hidden;
  color: var(--color-accent);
}

/*----------------------------------------------------------------------------- OUTPUT VIEWPORTS ----------------------------------------------------------------*/

.progressDiv {
    position: absolute;
    top: 0;
}
.progressDiv .progress{
  	width: 0%;
  	height: 4px;
  	border-radius: 0px;
  	line-height: 1.5 !important;
	margin-top: -10px;
}

.livePreview{
  margin: auto;
  margin-bottom: 60px;
}
.livePreview img{
    height: 640px;
    object-fit: scale-down; /* remove to make it fit */
}

#txt2img_gallery, #img2img_gallery{
    border-radius: 0px!important;
    min-height: 700px;
    border: 0;
    box-shadow: none;
}
#txt2img_gallery .preview,
#img2img_gallery .preview{
    max-height: None!important;
}
#txt2img_gallery .preview > img, #img2img_gallery .preview > img {
    object-fit: scale-down; /* "contain" to make it fit */
}

#lightboxModal > img.modalImageFullscreen {
    position: fixed;
    object-fit: contain;
    height: 90%;
    width: 95%;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    margin: auto;
}

.performance .vram {
    margin-left: 2ch;
}


/*----------------------------------------------------------------------------------- MISC --------------------------------------------------------------------------------------*/

div.gradio-container {
    padding: var(--padding-main-top) var(--padding-main-side) !important;
}

.block {
    box-shadow: none !important;
}

.block.padded.gradio-accordion {
    border-radius: var(--radius-lg) !important;
    margin-bottom: 0.4em;
    box-shadow: var(--block-shadow) !important;
}

div#script-list {
    margin-bottom: 0.4em;
}

input[type="number"] {
    padding: 0.5rem 0.75rem !important;
}

#txt2img_script_container .gradio-accordion,
#img2img_script_container .gradio-accordion {
    border-width: var(--block-border-width)!important;
}
#txt2img_script_container .gradio-box,
#img2img_script_container .gradio-box {
    padding: 8px !important;
}
#footer {
    margin-top: 60px !important;
}
/* fix for rows of small elements */
#txt2img_script_container div.compact,
#img2img_script_container div.compact {
    gap: 16px;
    flex-wrap: nowrap;
}

#tab_extensions table input[type="checkbox"] {
    appearance: none;
}

#txt2img_tools #txt2img_extra_networks,
#img2img_tools #img2img_extra_networks {
    max-width: none !important;
    overflow: hidden;
    white-space: nowrap;
}

.extra-network-cards .card:hover {
    box-shadow: 0 0 2px 0.3em var(--color-accent);
}

#txt2img_styles,
#img2img_styles {
    align-self: end !important;
}

#txt2img_styles .token, 
#img2img_styles .token {
    max-height: 24px !important;
}

#txt2img_actions_column,
#img2img_actions_column {
    justify-content: space-between;
}

#txt2img_token_counter span,
#img2img_token_counter span,
#txt2img_negative_token_counter span, 
#img2img_negative_token_counter span {
    box-shadow: none !important;
    border: none !important;
    padding: 0px 4px;
}

#tab_extensions table td, #tab_extensions table th{
    border: 1px solid var(--border-color);
}

.extra-network-cards .card .actions .name {
    font-size: 1.2em;
     font-weight: normal; 
}
.extra-network-cards .card {
    width: 8em;
    height: 12em;
}

#txt2img_generate, #img2img_generate {
    min-height: 8.5em;
}
#txt2img_tools > div:first-child,
#img2img_tools > div:first-child {
    max-width: 120px;
}
#txt2img_styles,
#img2img_styles {
    min-width: min(120px, 100%) !important;
}

#html_info_txt2img,
#html_info_img2img {
    font-size: var(--text-xs) !important;
}
